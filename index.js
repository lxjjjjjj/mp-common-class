!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function s(e,n,r,t,a,o,i){try{var u=e[o](i),s=u.value}catch(e){return void r(e)}u.done?n(s):Promise.resolve(s).then(t,a)}function c(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,a,o=[],i=!0,u=!1;try{for(r=r.call(e);!(i=(t=r.next()).done)&&(o.push(t.value),!n||o.length!==n);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var l=require("./collectClass.js").collectClass,e=require("./compareClass.js"),f=e.compareSubpackageClass,m=e.compareClass,e=require("./normalizeClass.js"),p=e.normalizeSubpackageClass,g=e.normalizeClass,b=require("./normalizeFiles.js").normalizeFiles,h=require("./utils.js").flattenAndUnique,e=function(){var u,n=(u=regeneratorRuntime.mark(function e(n){var a,o,i,u,s,r,t,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.commonStyle,o=n.fileRoot,i=n.cssName,u=n.mainPackage,s=n.subPackage,r=n.specSubPackage,t=0,c="编译完成",u&&!o)return c="如果是需要提取整个文件的公共样式, 需要写扫描文件入口! 如果不需要可以不传 mainPackage 参数",t=1,e.abrupt("return",new Promise(function(e,n){e({msg:c,errno:t})}));e.next=6;break;case 6:if(s&&r&&!r.length&&!o)return c="如果是需要提取所有分包的公共样式, 需要写扫描文件入口! 如果提取部分分包的公共样式需要添加 subpackagefileDir 参数",t=2,e.abrupt("return",new Promise(function(e,n){e({msg:c,errno:t})}));e.next=10;break;case 10:if(s||u){e.next=14;break}return c="请设置扫描主包或者分包",t=3,e.abrupt("return",new Promise(function(e,n){e({msg:c,errno:t})}));case 14:return i||(i="wxss",c="如果没有传css文件后缀默认文件后缀为wxss",t=0),a||(a="commonStyle",c="如果没有设定公共样式文件名称，默认为名为commonStyle",t=0),e.next=18,b({fileRoot:o,cssName:i,mainPackage:u,subPackage:s,specSubPackage:r}).then(function(e){var r=e.mainfiles,t=e.subpackagefiles;Promise.all([l(r),l(t)]).then(function(e){var n=Object.assign({},t,r);u&&g(n,m(h(Object.assign({},e[0],e[1]),o)),o,a,i)}).then(function(){l(t).then(function(e){s&&p(t,f(e),a,i)})})});case 18:return e.abrupt("return",new Promise(function(e,n){e({msg:c,errno:t})}));case 19:case"end":return e.stop()}},e)}),function(){var e=this,i=arguments;return new Promise(function(n,r){var t=u.apply(e,i);function a(e){s(t,n,r,a,o,"next",e)}function o(e){s(t,n,r,a,o,"throw",e)}a(void 0)})});return function(e){return n.apply(this,arguments)}}();module.exports={init:e,getCommonClass:function(e){var n,r,t,a=e.weight,o=e.css,i=e.commonCssName,u=e.outputFilePath,e=e.subpackageArr;e.length&&(n={},e.length&&e.forEach(function(e){n[e]=[e+"/"+o]}),i=c(i.split("."),2),r=i[0],t=i[1],l(n).then(function(e){g(n,m(h(e,u),a),u,r,t)}))}}});
//# sourceMappingURL=index.js.map
